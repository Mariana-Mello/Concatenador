<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CONCATENADOR</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="LOGO.png" />
</head>
<body>

  <!-- Cabe√ßalho -->
  <header class="titulo-container">
    <h1>
      <img src="LOGO.png" width="80" height="80" alt="Logo" />
      <strong>CONCATENADOR</strong>
    </h1>

    <!-- üß≠ Tooltip: Guia r√°pido -->
    <div class="tooltip-container">
      <span class="info-icon">üß≠</span>
      <div class="tooltip-text">
        <strong>üß≠ Guia r√°pido:</strong><br /><br />
        ‚Ä¢ Carregue o arquivo e defina o modelo desejado para gerar as linhas.<br /><br />
        ‚Ä¢ Campos tipo <b>CPF</b> e <b>DATA</b> s√£o validados e formatados automaticamente.<br /><br />
        ‚Ä¢ Campos tipo <b>TEXTO</b> que possuem espa√ßos no in√≠cio e no fim s√£o removidos por padr√£o.<br /><br />
        ‚Ä¢ Voc√™ pode aplicar formata√ß√µes extras com os bot√µes dispon√≠veis.<br /><br />
        ‚Ä¢ Visualize e exporte o resultado formatado com seguran√ßa e consist√™ncia.
      </div>
    </div>
  </header>

  <!-- 1. Carregar arquivo -->
  <section>
    <h3><strong>1. Carregar arquivo:</strong></h3>
    <br />
    <input type="file" id="fileInput" accept=".csv,.xlsx,.ods" />
    <p><small>Formato recomendado: .csv ou .xlsx</small></p>
  </section>

  <br /><hr /><br />

  <!-- 2. Definir modelo de formata√ß√£o -->
  <section>
    <h3><strong>2. Definir modelo de formata√ß√£o:</strong></h3>
    <br />
    <p>
      Use os placeholders <code>{A}</code>, <code>{B}</code>, etc., para representar as colunas da planilha + o tipo (CPF), (DATA) e (TEXTO).
    </p>
    <br />
    <textarea id="template" rows="3" cols="80">
Exemplo: (UUID(), '{A(CPF)}', '{B(DATA)}', '{C(TEXTO)}'),
Exemplo JSON: {"cpf": "{A(CPF)}", "data": "{B(DATA)}"},
    </textarea>

    <div id="colunas" style="display:none;">
      <p><strong>Colunas detectadas:</strong></p>
      <div id="colunasList"></div>
      <p>
        <small>Representa√ß√£o das colunas que possuem dados detectadas automaticamente no arquivo carregado. Certifique-se de preencher o modelo de acordo com as colunas dispon√≠veis.</small>
      </p>
    </div>

    <!-- === Op√ß√µes de formata√ß√£o de texto === -->
    <div id="configTexto" style="margin-top:10px; display:flex; align-items:center; gap:15px;">
      <div class="switches-wrapper">
        
        <!-- lower -->
        <div class="switch-container" data-tooltip="Converter texto para min√∫sculas">
          <input type="checkbox" id="switchLower" class="switch-input" />
          <label for="switchLower" class="switch-label"></label>
          <span class="switch-text">üî° lower</span>
        </div>

        <!-- UPPER -->
        <div class="switch-container" data-tooltip="Converter texto para MAI√öSCULAS">
          <input type="checkbox" id="switchUpper" class="switch-input" />
          <label for="switchUpper" class="switch-label"></label>
          <span class="switch-text">üî† UPPER</span>
        </div>

        <!-- Capitalize -->
        <div class="switch-container" data-tooltip="Primeira letra de cada palavra Mai√∫scula">
          <input type="checkbox" id="switchCapitalize" class="switch-input" />
          <label for="switchCapitalize" class="switch-label"></label>
          <span class="switch-text">üî§ Capitalize</span>
        </div>

        <!-- NoSpaces -->
        <div class="switch-container" data-tooltip="Remove todos os espa√ßos do texto">
          <input type="checkbox" id="switchNoSpace" class="switch-input" />
          <label for="switchNoSpace" class="switch-label"></label>
          <span class="switch-text">‚úÇÔ∏è NoSpaces</span>
        </div>

        <!-- Trim Extra -->
        <div class="switch-container" data-tooltip="Mant√©m apenas um espa√ßo entre palavras">
          <input type="checkbox" id="switchTrimExtra" class="switch-input" />
          <label for="switchTrimExtra" class="switch-label"></label>
          <span class="switch-text">üßπ Trim Extra</span>
        </div>

        <!-- camelCase -->
        <div class="switch-container" data-tooltip="Transforma em camelCase">
          <input type="checkbox" id="switchCamel" class="switch-input" />
          <label for="switchCamel" class="switch-label"></label>
          <span class="switch-text">üê™ camelCase</span>
        </div>

        <!-- PascalCase -->
        <div class="switch-container" data-tooltip="Transforma em PascalCase">
          <input type="checkbox" id="switchPascal" class="switch-input" />
          <label for="switchPascal" class="switch-label"></label>
          <span class="switch-text">üÖøÔ∏è PascalCase</span>
        </div>

        <!-- snake_case -->
        <div class="switch-container" data-tooltip="Transforma em snake_case">
          <input type="checkbox" id="switchSnake" class="switch-input" />
          <label for="switchSnake" class="switch-label"></label>
          <span class="switch-text">üêç snake_case</span>
        </div>

        <!-- kebab-case -->
        <div class="switch-container" data-tooltip="Transforma em kebab-case">
          <input type="checkbox" id="switchKebab" class="switch-input" />
          <label for="switchKebab" class="switch-label"></label>
          <span class="switch-text">üçñ kebab-case</span>
        </div>

      </div>
    </div>

    <!-- Formato da data -->
    <div style="margin-top:10px;">
      <label for="formatoData"><strong>Formato da Data:</strong></label>
      <select id="formatoData">
        <option value="yyyy-mm-dd" selected>YYYY-MM-DD</option>
        <option value="yyyy-mm-dd hh:mm:ss">YYYY-MM-DD HH:MM:SS</option>
        <option value="yyyy-mm-ddthh:mm:ssz">YYYY-MM-DDTHH:MM:SSZ</option>
        <option value="dd/mm/yyyy">dd/MM/yyyy</option>
      </select>
    </div>

    <!-- Campo adicional: hora manual -->
    <div id="horaConfig" style="display:none; margin-top:10px;">
      <label>
        <input type="checkbox" id="horaManualToggle" /> Definir hora manualmente
      </label>

      <div id="horaInputs" style="margin-top:5px;">
        <input type="number" id="hora" min="0" max="23" placeholder="HH" disabled style="width:60px;" />
        <input type="number" id="minuto" min="0" max="59" placeholder="MM" disabled style="width:60px;" />
        <input type="number" id="segundo" min="0" max="59" placeholder="SS" disabled style="width:60px;" />
      </div>
    </div>

    <!-- Bot√µes de a√ß√£o -->
    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
      <button id="gerarBtn">Gerar Preview</button>
      <button id="exportPreviewBtn" disabled>Exportar CSV</button>
      <button id="filtrarBtn" disabled>Mostrar apenas linhas validadas</button>
      <button id="filtrarBtnInvalid" disabled>Mostrar apenas linhas inv√°lidas</button>
    </div>

    <!-- Pr√©-visualiza√ß√µes -->
    <div id="previewGerar" style="background:#f7f7f7; padding:10px; white-space:pre;"></div>
    <div id="previewFiltrado" style="background:#e7ffe7; padding:10px; white-space:pre; margin-top:10px; border:1px solid #ccc; display:none;"></div>
    <div id="previewInvalid" style="background:#ffe7e7; padding:10px; white-space:pre; margin-top:10px; border:1px solid #ccc; display:none;"></div>

  </section>

  <hr />

  <!-- 3. Pr√©-visualiza√ß√£o final -->
  <section style="margin-top:20px; position:relative;">
    <h3><strong>3. Pr√©-visualiza√ß√£o Preview Completo:</strong></h3>
    <div id="preview">
      1- Ap√≥s inserir o Arquivo, clique no bot√£o Gerar Preview para visualizar o resultado.<br />
      2- A op√ß√£o Mostrar apenas linhas validadas e inv√°lidas √© exibida apenas quando a pr√©-visualiza√ß√£o foi ativada.<br />
      3- A exporta√ß√£o √© para o Preview Completo.
    </div>
  </section>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="script.js"></script>

</body>
</html>
